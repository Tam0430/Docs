### Observability 
The ability to understand and measure the state of a system based upon data generated by the system
Observability allows you to generate actionable outputs from unexpected scenarios in dynamic environment

Observability will help:
	1. Give better insight into the internal workings of a system/application
	2. speed up troubleshooting
	3. Detect hard to catch problems
	4. Monitor performance of an application
	5. Improve cross-team collaboration

#### 3 Pillars of Observability
How do we accomplish observability
	1. [Logging]
	2. [[Metrics]]
	3. [[Traces]]
[[Logging]]
Logs are records of events that have occurred and encapsulate information about the specific event
	Logs are comprised of:
	- Timestamp of when the log occurred
	- Message containing information
Logs are the most common form of observation produced by systems

[[Traces]]
Traces - allow you to follow operations as they traverses through various systems & services
So we can follow an individual request and see it flow through our system hop by hop
Traces help us connect the dots on how processes and services work together
![[Pasted image 20250104103253.png]] 
![[Pasted image 20250104103456.png]]


[[Metrics]]
Metrics provide information about the state of a system using numerical values
* CPU Load
*  Number of open files
*  HTTP response times
*  Number of errors
The data collected can be aggregated over time and graphed using visualisation tools to identify tools to identify trends over tine.
Metrics contain 4 pieces of information:
1. Metric name
2. Value - most recent or current value of the metric 
3. Timestamp for the metric
4. Dimensions - additional information about the metric
![[Pasted image 20250104122935.png]]

Prometheus is a monitoring solution that is responsible for collecting and aggregating metrics

##### Service Level Indicator(SLI)
   Quantitative measure of some aspect of the level of service that is provided
Common SLIs:
* Request Latency
* Error Rate
* Saturation
* Throughput
* Availability
Not all metrics for good SLIs. You want to find metrics that accurately measure a  user's experience

#### Service Level Object(SLO)
  Target value or range for an SLI

| SLI          | SLO             |
| ------------ | --------------- |
| Latency      | Latency < 100ms |
| availability | 99.9% uptime    |
SLOs should be directly related to the customer experience. The main purpose of SLO is to quantify reliability of a product to a customer

#### Service Level Agreement(SLA)
  Contract between a vendor and user that guarantees a certain SLO
  The consequences for the meeting any SLO can be financial based but can also be variety of other things as well

# Prometheus
 Its an open-source monitoring tool that collects metrics data, and provide tools to visualise the collected data
In addition, Prometheus allows you to generate alerts when metric reach a user specification threshold
Prometheus collects metrics by scraping targets who expose metrics through an HTTP endpoint
Scraped metric are then stored in a time series database which can be queried using Prometheus built-in query language PromQl
#### what kind of metrics can Prometheus Monitor?
- CPU/Memory Utilization
- Disk space
- Service Uptime
- Application specific data
	- Number of exceptions
	- Latency
	- Pending Requests
Prometheus is designed to monitor time-series data that is numeric
What type of data should prometheus ***not*** monitor
- Events 
- System Logs
- Traces
# Prometheus Architecture 
![[Pasted image 20250104130740.png]]
###### Exporter  
- just little mini process that run on your targets that are responsible for serving up the metrics
- These exporters are responsible for taking internal data and converting it into a metric that prometheus will understand . .
- Most systems by default don't collect metrics and expose them on an HTTP endpoint to be consumed by a prometheus server
- Exporter collect metrics and expose them in a format prometheus expects
![[Pasted image 20250104175246.png]]


Prometheus using  Pull data request 
If you want to use the **push** data for some addition scenario you need to use external Push gateway

##### Service Discovery
  Service discovery is all about providing a list of targets for Prometheus escape so that you don't have code those values.
##### Alert Manager:
  it handle all of the SMS, the email, the SMTP integration it can send the notification to the end user
![[Pasted image 20250104174937.png]]

### Prometheus Installation systemd
	sudo useradd --no-create-home --shell /bin/false prometheus
config Directory store the prometheus.yaml file `sudo mkdir /etc/prometheus`
`sudo mkdir /var/lib/prometheus`  store the all of the data
`sudo chown prometheus:prometheus /etc/prometheus`
`sudo chown prometheus:prometheus /var/lib/prometheus`
`wget <prometheus pkg url>`
`tar xvfz prometheus-x.xx.xx.linux-amd64.tar.gz`
`sudo cp prometheus /usr/local/bin`
`sudo cp promtool /usr/local/bin`
`sudo cp -r consoles /etc/prometheus`.
`sudo cp -r console_libraries /etc/prometheus`
`sudo cp prometheus.yaml /etc/prometheus/prometheus.yaml`
gave the  permission to prometheus users to this files 
`sudo -u prometheus /usr/local/bin/prometheus \`
   `--config.file /etc/prometheus/prometheus.yaml \`
   `--storage.tsdb.path /var/lib/prometheus`
   `--web.console.templates=/etc/prometheus/console \`
   `--web.console.libraries=/etc/prometheus/console_libraries`

`sudo vi /etc/systemd/system/prometheus.service`
![[Pasted image 20250105195918.png]]

`sudo systemctl deamon-reload`
`sudo systemctl start prometheus`
`sudo systemctl enable prometheus`
`sudo systemctl status prometheus`
`crul http://localhost:9090`

##### Node Exporter Installation:-
This is collecting metrics tool on a Linux Host 
`wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz`
`tar xvf node_exporter`
`cd node_exporter`
`./node_exporter`
`curl localhost:9100/metrics`  OR `http://localhost:9100/metrics`  on web browser
#### *Node exporter installation on systemd*
`sudo cp node_exporter /usr/local/bin`.
`sudo useradd --no-create-home --shell /bin/false node_exporter`
`sudo chown node_exporter:node_exporter /usr/local/bin/node_exporter`
`sudo vi /etc/systemd/system/node_exporter.service`
![[Pasted image 20250105201301.png]]
`sudo systemctl daemon-reload`
`sudo systemctl start node_exporter`
`sudo systemctl enable node_exporter`
`sudo systemctl status node_exporter`

### Prometheus configuration
![[Pasted image 20250105203113.png]]

| `job_name: 'nodes'`                                 | Define a job with a name of nodes                                     |
| --------------------------------------------------- | --------------------------------------------------------------------- |
| `scrape_interval: 30s`                              | Metrics should be scraped every 30s.                                  |
| `scrape_timeout: 3s`                                | Timeout of a scrape is 3s                                             |
| `scheme: https`                                     | Use HTTPS instead of default HTTP.                                    |
| `metrics_path: /stats/metrics`                      | Scrape path should be changed from default /metrics to /stats/metrics |
| `static_configs:`<br>     `- targets: [IP_address]` | scrape targets at the IP address                                      |

#### Node Exporter TLS (Authentication/Encryption):-








